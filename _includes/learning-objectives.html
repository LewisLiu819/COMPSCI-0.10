<!-- Learning Objectives Preview Box -->
{% assign current_url = page.url %}
{% assign lesson_number = current_url | split: 'lesson' | last | split: '/' | first | plus: 0 %}
{% assign lang = page.lang | default: 'zh' %}

<div class="learning-objectives-container" style="margin: 2rem 0; padding: 2rem; background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%); border-radius: 20px; border-left: 6px solid #2196F3; box-shadow: 0 6px 25px rgba(0, 0, 0, 0.1); position: relative; overflow: hidden;">

  <!-- Decorative background pattern -->
  <div class="bg-pattern" style="position: absolute; top: 0; right: 0; width: 150px; height: 150px; opacity: 0.1; background: url('data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 100 100\"><circle cx=\"50\" cy=\"50\" r=\"20\" fill=\"%23666\"/><circle cx=\"20\" cy=\"20\" r=\"10\" fill=\"%23666\"/><circle cx=\"80\" cy=\"20\" r=\"8\" fill=\"%23666\"/><circle cx=\"20\" cy=\"80\" r=\"12\" fill=\"%23666\"/><circle cx=\"80\" cy=\"80\" r=\"6\" fill=\"%23666\"/></svg>') no-repeat center; background-size: contain;"></div>

  <!-- Header with icon and title -->
  <div class="objectives-header" style="display: flex; align-items: center; margin-bottom: 1.5rem;">
    <div class="header-icon" style="font-size: 2.5rem; margin-right: 1rem; animation: float 3s ease-in-out infinite;">ğŸ¯</div>
    <div>
      <h3 style="color: #1976D2; margin: 0; font-size: 1.6rem; font-weight: 700;">
        {% if lang == 'en' %}What You'll Learn{% else %}æ‚¨å°†å­¦åˆ°ä»€ä¹ˆ{% endif %}
      </h3>
      <p style="color: #666; margin: 0.25rem 0 0 0; font-size: 1rem;">
        {% if lang == 'en' %}Key learning objectives for this lesson{% else %}æœ¬è¯¾çš„æ ¸å¿ƒå­¦ä¹ ç›®æ ‡{% endif %}
      </p>
    </div>
  </div>

  <!-- Learning objectives list based on lesson number -->
  <div class="objectives-content">
    {% case lesson_number %}

      {% when 1 %}
        <!-- Lesson 1: What is Computer Science? -->
        <div class="objective-item" style="display: flex; align-items: flex-start; margin-bottom: 1.25rem; padding: 1rem; background: rgba(255, 255, 255, 0.7); border-radius: 12px; transition: transform 0.3s ease;">
          <div style="font-size: 1.5rem; margin-right: 1rem; margin-top: 0.25rem;">ğŸ’¡</div>
          <div>
            <h4 style="color: #1976D2; margin: 0 0 0.5rem 0; font-size: 1.1rem;">
              {% if lang == 'en' %}Understand Computer Science Basics{% else %}ç†è§£è®¡ç®—æœºç§‘å­¦åŸºç¡€æ¦‚å¿µ{% endif %}
            </h4>
            <p style="margin: 0; color: #555; line-height: 1.5;">
              {% if lang == 'en' %}Learn that computer science is not just about hardware, but a discipline for solving problems and analyzing data.{% else %}å­¦ç”Ÿèƒ½å¤Ÿç†è§£"è®¡ç®—æœºç§‘å­¦"æŒ‡çš„ä¸ä»…ä»…æ˜¯è®¡ç®—æœºç¡¬ä»¶ï¼Œè€Œæ˜¯æ¢ç´¢å¦‚ä½•è§£å†³é—®é¢˜çš„å­¦ç§‘ã€‚{% endif %}
            </p>
          </div>
        </div>

        <div class="objective-item" style="display: flex; align-items: flex-start; margin-bottom: 1.25rem; padding: 1rem; background: rgba(255, 255, 255, 0.7); border-radius: 12px; transition: transform 0.3s ease;">
          <div style="font-size: 1.5rem; margin-right: 1rem; margin-top: 0.25rem;">ğŸŒ</div>
          <div>
            <h4 style="color: #1976D2; margin: 0 0 0.5rem 0; font-size: 1.1rem;">
              {% if lang == 'en' %}Discover Real-World Applications{% else %}å‘ç°ç°å®ä¸–ç•Œä¸­çš„åº”ç”¨{% endif %}
            </h4>
            <p style="margin: 0; color: #555; line-height: 1.5;">
              {% if lang == 'en' %}Identify how computer science helps us process information, communicate, and create entertainment.{% else %}è®¤è¯†è®¡ç®—æœºç§‘å­¦å¦‚ä½•å¸®åŠ©æˆ‘ä»¬å¤„ç†ä¿¡æ¯ã€è¿›è¡Œæ²Ÿé€šå’Œå¨±ä¹ç­‰ã€‚{% endif %}
            </p>
          </div>
        </div>

        <div class="objective-item" style="display: flex; align-items: flex-start; margin-bottom: 1.25rem; padding: 1rem; background: rgba(255, 255, 255, 0.7); border-radius: 12px; transition: transform 0.3s ease;">
          <div style="font-size: 1.5rem; margin-right: 1rem; margin-top: 0.25rem;">ğŸš€</div>
          <div>
            <h4 style="color: #1976D2; margin: 0 0 0.5rem 0; font-size: 1.1rem;">
              {% if lang == 'en' %}Spark Curiosity and Interest{% else %}æ¿€å‘å¥½å¥‡å¿ƒå’Œå…´è¶£{% endif %}
            </h4>
            <p style="margin: 0; color: #555; line-height: 1.5;">
              {% if lang == 'en' %}Build excitement about computer science through interactive games and real-world examples.{% else %}é€šè¿‡äº’åŠ¨æ¸¸æˆå’Œæ¡ˆä¾‹ï¼Œæ¿€å‘å­¦ç”Ÿå¯¹è®¡ç®—æœºç§‘å­¦çš„å¥½å¥‡å¿ƒå’Œå…´è¶£ã€‚{% endif %}
            </p>
          </div>
        </div>

      {% when 2 %}
        <!-- Lesson 2: Computer History and Impact -->
        <div class="objective-item" style="display: flex; align-items: flex-start; margin-bottom: 1.25rem; padding: 1rem; background: rgba(255, 255, 255, 0.7); border-radius: 12px; transition: transform 0.3s ease;">
          <div style="font-size: 1.5rem; margin-right: 1rem; margin-top: 0.25rem;">ğŸ“š</div>
          <div>
            <h4 style="color: #1976D2; margin: 0 0 0.5rem 0; font-size: 1.1rem;">
              {% if lang == 'en' %}Explore Computer Evolution{% else %}æ¢ç´¢è®¡ç®—æœºçš„å‘å±•å†ç¨‹{% endif %}
            </h4>
            <p style="margin: 0; color: #555; line-height: 1.5;">
              {% if lang == 'en' %}Journey from huge old machines to today's smartphones and understand technological progress.{% else %}ä»å·¨å¤§çš„è€å¼æœºå™¨åˆ°ä»Šå¤©çš„æ™ºèƒ½æ‰‹æœºï¼Œè·Ÿéšè®¡ç®—æœºå‘å±•çš„è„šæ­¥ã€‚{% endif %}
            </p>
          </div>
        </div>

        <div class="objective-item" style="display: flex; align-items: flex-start; margin-bottom: 1.25rem; padding: 1rem; background: rgba(255, 255, 255, 0.7); border-radius: 12px; transition: transform 0.3s ease;">
          <div style="font-size: 1.5rem; margin-right: 1rem; margin-top: 0.25rem;">ğŸŒ</div>
          <div>
            <h4 style="color: #1976D2; margin: 0 0 0.5rem 0; font-size: 1.1rem;">
              {% if lang == 'en' %}Understand Technology's Impact{% else %}ç†è§£ç§‘æŠ€çš„å½±å“{% endif %}
            </h4>
            <p style="margin: 0; color: #555; line-height: 1.5;">
              {% if lang == 'en' %}Learn how technology has changed our lives, society, and the way we communicate.{% else %}æ„Ÿå—ç§‘æŠ€å¦‚ä½•æ”¹å˜æˆ‘ä»¬çš„ç”Ÿæ´»å’Œç¤¾ä¼šã€‚{% endif %}
            </p>
          </div>
        </div>

      {% when 3 %}
        <!-- Lesson 3: Programs and Algorithms -->
        <div class="objective-item" style="display: flex; align-items: flex-start; margin-bottom: 1.25rem; padding: 1rem; background: rgba(255, 255, 255, 0.7); border-radius: 12px; transition: transform 0.3s ease;">
          <div style="font-size: 1.5rem; margin-right: 1rem; margin-top: 0.25rem;">ğŸ§©</div>
          <div>
            <h4 style="color: #1976D2; margin: 0 0 0.5rem 0; font-size: 1.1rem;">
              {% if lang == 'en' %}Master Problem Decomposition{% else %}æŒæ¡é—®é¢˜åˆ†è§£{% endif %}
            </h4>
            <p style="margin: 0; color: #555; line-height: 1.5;">
              {% if lang == 'en' %}Learn to break down complex problems into simple, manageable steps.{% else %}å­¦ä¹ å°†å¤æ‚çš„é—®é¢˜åˆ†è§£ä¸ºç®€å•çš„æ­¥éª¤ã€‚{% endif %}
            </p>
          </div>
        </div>

        <div class="objective-item" style="display: flex; align-items: flex-start; margin-bottom: 1.25rem; padding: 1rem; background: rgba(255, 255, 255, 0.7); border-radius: 12px; transition: transform 0.3s ease;">
          <div style="font-size: 1.5rem; margin-right: 1rem; margin-top: 0.25rem;">âš™ï¸</div>
          <div>
            <h4 style="color: #1976D2; margin: 0 0 0.5rem 0; font-size: 1.1rem;">
              {% if lang == 'en' %}Understand Algorithms{% else %}ç†è§£ç®—æ³•æ¦‚å¿µ{% endif %}
            </h4>
            <p style="margin: 0; color: #555; line-height: 1.5;">
              {% if lang == 'en' %}Grasp the concept of algorithms and how programs implement step-by-step solutions.{% else %}ç†è§£ç®—æ³•çš„æ¦‚å¿µï¼Œæ˜ç™½å¦‚ä½•ç”¨ç¨‹åºå®ç°è¿™äº›æ­¥éª¤ã€‚{% endif %}
            </p>
          </div>
        </div>

      {% when 4 %}
        <!-- Lesson 4: Visual Programming -->
        <div class="objective-item" style="display: flex; align-items: flex-start; margin-bottom: 1.25rem; padding: 1rem; background: rgba(255, 255, 255, 0.7); border-radius: 12px; transition: transform 0.3s ease;">
          <div style="font-size: 1.5rem; margin-right: 1rem; margin-top: 0.25rem;">ğŸ¨</div>
          <div>
            <h4 style="color: #1976D2; margin: 0 0 0.5rem 0; font-size: 1.1rem;">
              {% if lang == 'en' %}Create with Scratch Programming{% else %}ä½¿ç”¨Scratchåˆ›ä½œ{% endif %}
            </h4>
            <p style="margin: 0; color: #555; line-height: 1.5;">
              {% if lang == 'en' %}Use Scratch or Snap! to create mini-games and animations by dragging code blocks.{% else %}ä½¿ç”¨Scratchæˆ–Snap!è¿›è¡Œç®€å•ç¼–ç¨‹ï¼Œé€šè¿‡æ‹–æ‹½ä»£ç å—åˆ›å»ºå°æ¸¸æˆæˆ–åŠ¨ç”»ã€‚{% endif %}
            </p>
          </div>
        </div>

        <div class="objective-item" style="display: flex; align-items: flex-start; margin-bottom: 1.25rem; padding: 1rem; background: rgba(255, 255, 255, 0.7); border-radius: 12px; transition: transform 0.3s ease;">
          <div style="font-size: 1.5rem; margin-right: 1rem; margin-top: 0.25rem;">ğŸ®</div>
          <div>
            <h4 style="color: #1976D2; margin: 0 0 0.5rem 0; font-size: 1.1rem;">
              {% if lang == 'en' %}Experience Programming Joy{% else %}æ„Ÿå—ç¼–ç¨‹ä¹è¶£{% endif %}
            </h4>
            <p style="margin: 0; color: #555; line-height: 1.5;">
              {% if lang == 'en' %}Discover the fun and creativity of programming through hands-on projects.{% else %}æ„Ÿå—ç¼–ç¨‹çš„ä¹è¶£å’Œåˆ›é€ æ€§ã€‚{% endif %}
            </p>
          </div>
        </div>

      {% else %}
        <!-- Generic learning objectives for other lessons -->
        <div class="objective-item" style="display: flex; align-items: flex-start; margin-bottom: 1.25rem; padding: 1rem; background: rgba(255, 255, 255, 0.7); border-radius: 12px; transition: transform 0.3s ease;">
          <div style="font-size: 1.5rem; margin-right: 1rem; margin-top: 0.25rem;">ğŸ“–</div>
          <div>
            <h4 style="color: #1976D2; margin: 0 0 0.5rem 0; font-size: 1.1rem;">
              {% if lang == 'en' %}Core Concepts{% else %}æ ¸å¿ƒæ¦‚å¿µ{% endif %}
            </h4>
            <p style="margin: 0; color: #555; line-height: 1.5;">
              {% if lang == 'en' %}Master the fundamental concepts covered in this lesson.{% else %}æŒæ¡æœ¬è¯¾æ¶µç›–çš„åŸºç¡€æ¦‚å¿µã€‚{% endif %}
            </p>
          </div>
        </div>

        <div class="objective-item" style="display: flex; align-items: flex-start; margin-bottom: 1.25rem; padding: 1rem; background: rgba(255, 255, 255, 0.7); border-radius: 12px; transition: transform 0.3s ease;">
          <div style="font-size: 1.5rem; margin-right: 1rem; margin-top: 0.25rem;">ğŸ› ï¸</div>
          <div>
            <h4 style="color: #1976D2; margin: 0 0 0.5rem 0; font-size: 1.1rem;">
              {% if lang == 'en' %}Practical Skills{% else %}å®è·µæŠ€èƒ½{% endif %}
            </h4>
            <p style="margin: 0; color: #555; line-height: 1.5;">
              {% if lang == 'en' %}Apply knowledge through hands-on activities and projects.{% else %}é€šè¿‡å®è·µæ´»åŠ¨å’Œé¡¹ç›®åº”ç”¨çŸ¥è¯†ã€‚{% endif %}
            </p>
          </div>
        </div>

        <div class="objective-item" style="display: flex; align-items: flex-start; margin-bottom: 1.25rem; padding: 1rem; background: rgba(255, 255, 255, 0.7); border-radius: 12px; transition: transform 0.3s ease;">
          <div style="font-size: 1.5rem; margin-right: 1rem; margin-top: 0.25rem;">ğŸ¯</div>
          <div>
            <h4 style="color: #1976D2; margin: 0 0 0.5rem 0; font-size: 1.1rem;">
              {% if lang == 'en' %}Problem Solving{% else %}é—®é¢˜è§£å†³{% endif %}
            </h4>
            <p style="margin: 0; color: #555; line-height: 1.5;">
              {% if lang == 'en' %}Develop critical thinking and problem-solving abilities.{% else %}åŸ¹å…»æ‰¹åˆ¤æ€§æ€ç»´å’Œé—®é¢˜è§£å†³èƒ½åŠ›ã€‚{% endif %}
            </p>
          </div>
        </div>

    {% endcase %}
  </div>

  <!-- Progress indicator for learning objectives -->
  <div class="objectives-footer" style="margin-top: 2rem; padding-top: 1.5rem; border-top: 2px solid rgba(25, 118, 210, 0.1);">
    <div style="display: flex; justify-content: space-between; align-items: center;">
      <div style="display: flex; align-items: center;">
        <span style="font-size: 1rem; color: #666; margin-right: 1rem;">
          {% if lang == 'en' %}Lesson Duration:{% else %}è¯¾ç¨‹æ—¶é•¿:{% endif %}
        </span>
        <div class="duration-badge" style="background: linear-gradient(135deg, #4CAF50 0%, #66BB6A 100%); color: white; padding: 0.5rem 1rem; border-radius: 20px; font-weight: 600; font-size: 0.9rem;">
          â±ï¸ 60 {% if lang == 'en' %}minutes{% else %}åˆ†é’Ÿ{% endif %}
        </div>
      </div>

      <div style="display: flex; align-items: center;">
        <span style="font-size: 1rem; color: #666; margin-right: 1rem;">
          {% if lang == 'en' %}Difficulty:{% else %}éš¾åº¦:{% endif %}
        </span>
        <div class="difficulty-indicator" style="display: flex; gap: 0.25rem;">
          {% for i in (1..5) %}
            {% assign filled = false %}
            {% if lesson_number <= 3 and i <= 2 %}
              {% assign filled = true %}
            {% elsif lesson_number <= 8 and i <= 3 %}
              {% assign filled = true %}
            {% elsif lesson_number <= 12 and i <= 4 %}
              {% assign filled = true %}
            {% elsif lesson_number > 12 and i <= 5 %}
              {% assign filled = true %}
            {% endif %}

            <div style="width: 12px; height: 12px; border-radius: 50%; background: {% if filled %}#F18F01{% else %}#E0E0E0{% endif %}; transition: all 0.3s ease;"></div>
          {% endfor %}
        </div>
      </div>
    </div>
  </div>

</div>

<!-- Learning Objectives Styles -->
<style>
.objective-item:hover {
  transform: translateX(8px);
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
}

@keyframes float {
  0%, 100% {
    transform: translateY(0px);
  }
  50% {
    transform: translateY(-10px);
  }
}

.learning-objectives-container:hover .header-icon {
  animation: bounce 0.6s ease;
}

@keyframes bounce {
  0%, 100% {
    transform: translateY(0);
  }
  25% {
    transform: translateY(-5px);
  }
  50% {
    transform: translateY(-10px);
  }
  75% {
    transform: translateY(-5px);
  }
}

.difficulty-indicator div:hover {
  transform: scale(1.5);
}

/* Mobile responsiveness */
@media (max-width: 768px) {
  .learning-objectives-container {
    padding: 1.5rem !important;
    margin: 1.5rem 0 !important;
  }

  .objectives-header {
    flex-direction: column !important;
    text-align: center !important;
  }

  .header-icon {
    font-size: 2rem !important;
    margin: 0 0 1rem 0 !important;
  }

  .objective-item {
    flex-direction: column !important;
    text-align: center !important;
  }

  .objective-item div:first-child {
    margin: 0 0 0.75rem 0 !important;
  }

  .objectives-footer > div {
    flex-direction: column !important;
    gap: 1rem !important;
  }

  .objectives-footer > div > div {
    justify-content: center !important;
  }
}

/* Add progress completion animation */
.objectives-completed {
  animation: completion-glow 0.8s ease;
}

@keyframes completion-glow {
  0% { box-shadow: 0 6px 25px rgba(0, 0, 0, 0.1); }
  50% { box-shadow: 0 6px 25px rgba(76, 175, 80, 0.4); }
  100% { box-shadow: 0 6px 25px rgba(0, 0, 0, 0.1); }
}
</style>

<!-- Interactive JavaScript -->
<script>
document.addEventListener('DOMContentLoaded', function() {
  // Add click effects to objective items
  const objectiveItems = document.querySelectorAll('.objective-item');

  objectiveItems.forEach(item => {
    item.addEventListener('click', function() {
      // Add a small completion animation
      this.style.background = 'rgba(76, 175, 80, 0.2)';
      this.style.transform = 'translateX(8px) scale(1.02)';

      setTimeout(() => {
        this.style.background = 'rgba(255, 255, 255, 0.7)';
        this.style.transform = 'translateX(8px)';
      }, 300);
    });
  });

  // Add progressive disclosure for objectives
  let objectiveIndex = 0;
  const revealObjectives = () => {
    if (objectiveIndex < objectiveItems.length) {
      objectiveItems[objectiveIndex].style.opacity = '0';
      objectiveItems[objectiveIndex].style.transform = 'translateY(20px)';
      objectiveItems[objectiveIndex].style.transition = 'all 0.5s ease';

      setTimeout(() => {
        objectiveItems[objectiveIndex].style.opacity = '1';
        objectiveItems[objectiveIndex].style.transform = 'translateY(0)';
        objectiveIndex++;
        setTimeout(revealObjectives, 200);
      }, 100);
    }
  };

  // Start the reveal animation
  setTimeout(revealObjectives, 500);

  // Mark objectives as completed when page is scrolled to bottom
  let objectivesCompleted = false;
  window.addEventListener('scroll', function() {
    if (!objectivesCompleted && (window.innerHeight + window.scrollY) >= document.body.offsetHeight - 100) {
      const container = document.querySelector('.learning-objectives-container');
      if (container) {
        container.classList.add('objectives-completed');
        objectivesCompleted = true;

        // Store completion in localStorage
        const currentLesson = {{ lesson_number }};
        const viewedObjectives = JSON.parse(localStorage.getItem('viewedObjectives') || '[]');
        if (!viewedObjectives.includes(currentLesson)) {
          viewedObjectives.push(currentLesson);
          localStorage.setItem('viewedObjectives', JSON.stringify(viewedObjectives));
        }
      }
    }
  });
});
</script>